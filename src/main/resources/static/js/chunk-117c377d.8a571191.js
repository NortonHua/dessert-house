(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-117c377d","chunk-2d0ae96b"],{"0b69":function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return b});var n=r("a34a"),s=r.n(n),o=r("ceda"),a=r("283a"),i=r("4360");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(r,!0).forEach(function(t){l(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t,r,n,s,o,a){try{var i=e[o](a),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,s)}function p(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var o=e.apply(t,r);function a(e){f(o,n,s,a,i,"next",e)}function i(e){f(o,n,s,a,i,"throw",e)}a(void 0)})}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),e}var b=function(){function e(){m(this,e)}return v(e,null,[{key:"register",value:function(e){return Object(o["default"])({method:"post",url:"cms/user/register",data:e,handleError:!0})}},{key:"getToken",value:function(){var e=p(s.a.mark(function e(t,r){var n;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["post"])("cms/user/login",{username:t,password:r});case 2:return n=e.sent,Object(a["saveTokens"])(n.access_token,n.refresh_token),e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getInformation",value:function(){var e=p(s.a.mark(function e(){var t,r;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["get"])("cms/user/information");case 2:return t=e.sent,r=null===i["default"].getters.user?{}:i["default"].getters.user,e.abrupt("return",Object.assign(c({},r),t));case 5:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getPermissions",value:function(){var e=p(s.a.mark(function e(){var t,r;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["get"])("cms/user/permissions");case 2:return t=e.sent,r=null===i["default"].getters.user?{}:i["default"].getters.user,e.abrupt("return",Object.assign(c({},r),t));case 5:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"updatePassword",value:function(e){var t=e.old_password,r=e.new_password,n=e.confirm_password;return Object(o["put"])("cms/user/change_password",{new_password:r,confirm_password:n,old_password:t})}}]),e}()},1954:function(e,t,r){"use strict";var n=r("c591"),s=r.n(n);s.a},c591:function(e,t,r){},e49c:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"form-box",attrs:{"element-loading-background":"rgba(0, 0, 0, 0)"}},[e._m(0),r("form",{staticClass:"login-form",attrs:{autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.throttleLogin()}}},[r("div",{staticClass:"form-item nickname"},[r("span",{staticClass:"icon account-icon"}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.username,expression:"form.username"}],attrs:{type:"text",autocomplete:"off",placeholder:"请填写用户名"},domProps:{value:e.form.username},on:{input:function(t){t.target.composing||e.$set(e.form,"username",t.target.value)}}})]),r("div",{staticClass:"form-item password"},[r("span",{staticClass:"icon secret-icon"}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],attrs:{type:"password",autocomplete:"off",placeholder:"请填写用户登录密码"},domProps:{value:e.form.password},on:{input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}})]),r("button",{staticClass:"submit-btn",attrs:{type:"submit"}},[e._v("登录")])])])])},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"title"},[r("h1",{attrs:{title:"Lin"}},[e._v("一日一甜")])])}],o=r("a34a"),a=r.n(o),i=r("2f62"),u=r("0b69"),c=r("0a2a");function l(e,t,r,n,s,o,a){try{var i=e[o](a),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,s)}function f(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var o=e.apply(t,r);function a(e){l(o,n,s,a,i,"next",e)}function i(e){l(o,n,s,a,i,"throw",e)}a(void 0)})}}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(r,!0).forEach(function(t){d(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v={name:"login",data:function(){return{loading:!1,wait:2e3,throttleLogin:null,form:{username:"root",password:"123456"}}},methods:m({login:function(){var e=f(a.a.mark(function e(){var t,r,n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.form,r=t.username,n=t.password,e.prev=1,this.loading=!0,e.next=5,u["default"].getToken(r,n);case 5:return e.next=7,this.getInformation();case 7:this.loading=!1,this.$router.push("/about"),this.$message.success("登录成功"),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](1),this.loading=!1,console.log(e.t0);case 16:case"end":return e.stop()}},e,this,[[1,12]])}));function t(){return e.apply(this,arguments)}return t}(),getInformation:function(){var e=f(a.a.mark(function e(){var t;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u["default"].getPermissions();case 3:t=e.sent,this.setUserAndState(t),this.setUserPermissions(t.permissions),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}()},Object(i["b"])(["setUserAndState"]),{},Object(i["d"])({setUserPermissions:"SET_USER_PERMISSIONS"})),created:function(){this.throttleLogin=c["default"].throttle(this.login,this.wait)},components:{}},b=v,h=(r("1954"),r("2877")),w=Object(h["a"])(b,n,s,!1,null,null,null);t["default"]=w.exports}}]);