(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06b0ba8f"],{"5b23":function(e,t,r){"use strict";var n=r("69e8"),s=r.n(n);s.a},"69e8":function(e,t,r){},dfcc:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"title"},[e._v("新建分组信息")]),r("el-row",[r("el-col",{attrs:{lg:16,md:20,sm:24,xs:24}},[r("div",{staticClass:"content"},[r("el-form",{ref:"form",attrs:{"status-icon":"",rules:e.rules,model:e.form,"label-position":"right","label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"分组名称",prop:"name"}},[r("el-input",{attrs:{size:"medium",clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"分组描述",prop:"info"}},[r("el-input",{attrs:{size:"medium",clearable:""},model:{value:e.form.info,callback:function(t){e.$set(e.form,"info",t)},expression:"form.info"}})],1),r("el-form-item",[r("group-permissions",{ref:"groupPermissions",attrs:{title:"分配权限"},on:{updatePermissions:e.updatePermissions,updateAllPermissions:e.updateAllPermissions}})],1),r("el-form-item",{staticClass:"submit"},[r("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("form")}}},[e._v("保 存")]),r("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("重 置")])],1)],1)],1)])],1)],1)},s=[],i=r("a34a"),o=r.n(i),a=r("3a2e"),u=r("21aa");function l(e,t,r,n,s,i,o){try{var a=e[i](o),u=a.value}catch(l){return void r(l)}a.done?t(u):Promise.resolve(u).then(n,s)}function c(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var i=e.apply(t,r);function o(e){l(i,n,s,o,a,"next",e)}function a(e){l(i,n,s,o,a,"throw",e)}o(void 0)})}}var m={components:{GroupPermissions:u["default"]},inject:["eventBus"],data:function(){var e=function(e,t,r){if(!t)return r(new Error("分组名称不能为空"));r()};return{allPermissions:[],permissions:[],form:{name:"",info:""},rules:{name:[{validator:e,trigger:["blur","change"],required:!0}],info:[]},loading:!1}},methods:{updatePermissions:function(e){this.permissions=e},updateAllPermissions:function(e){this.allPermissions=e},submitForm:function(){var e=c(o.a.mark(function e(t){var r=this;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$refs[t].validate(function(){var e=c(o.a.mark(function e(t){var n,s;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=16;break}return s=r.permissions.filter(function(e){return Object.keys(r.allPermissions).indexOf(e)<0}),e.prev=2,r.loading=!0,e.next=6,a["default"].createOneGroup(r.form.name,r.form.info,s,r.id);case 6:n=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](2),r.loading=!1,console.log(e.t0);case 13:n.code<window.MAX_SUCCESS_CODE?(r.loading=!1,r.$message.success("".concat(n.message)),r.eventBus.$emit("addGroup",!0),r.$router.push("/admin/group/list"),r.resetForm("form")):(r.loading=!1,r.$message.error("".concat(n.message))),e.next=18;break;case 16:return r.$message.error("请将信息填写完整"),e.abrupt("return",!1);case 18:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),resetForm:function(e){this.$refs[e].resetFields(),this.$refs.groupPermissions.getGroupPermissions()}}},f=m,p=(r("5b23"),r("2877")),d=Object(p["a"])(f,n,s,!1,null,"5d38b195",null);t["default"]=d.exports}}]);